

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.png">
  <link rel="icon" href="/img/favicon.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#66afef">
  <meta name="author" content="licyk">
  <meta name="keywords" content="">
  
    <meta name="description" content="记录一次解决 Git 合并的经历。">
<meta property="og:type" content="article">
<meta property="og:title" content="解决 Git 合并冲突">
<meta property="og:url" content="http://licyk.github.io/2024/05/21/resolve-git-conflict/index.html">
<meta property="og:site_name" content="licyk的小窝">
<meta property="og:description" content="记录一次解决 Git 合并的经历。">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-05-21T03:16:17.000Z">
<meta property="article:modified_time" content="2024-10-21T14:58:56.065Z">
<meta property="article:author" content="licyk">
<meta property="article:tag" content="linux">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>解决 Git 合并冲突 - licyk的小窝</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"licyk.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":30,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"left","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":6},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":"006ae77e924b11b775c7a321b89cbdc2","google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":"McVn7EAU2PejD5Y78Yp0oVzw-gzGzoHsz","app_key":"JiPLdIay1LynZr2W0FaCYCN9","server_url":"https://mcvn7eau.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null},"woyaola":null,"cnzz":null},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  
    <!-- Baidu Analytics -->
    <script async>
      if (!Fluid.ctx.dnt) {
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?006ae77e924b11b775c7a321b89cbdc2";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      }
    </script>
  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>licyk的小窝</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tools/" target="_self">
                <i class="iconfont icon-briefcase"></i>
                <span>工具</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/" target="_self">
                <i class="iconfont icon-link-fill"></i>
                <span>友链</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/post.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="解决 Git 合并冲突"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-05-21 11:16" pubdate>
          2024年5月21日 上午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4.4k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          37 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="padding-left: 2rem; margin-right: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">解决 Git 合并冲突</h1>
            
            
              <div class="markdown-body">
                
                <p>记录一次解决 Git 合并的经历。</p>
<span id="more"></span>

<hr>
<p>2024.5.21</p>
<p>在 <a target="_blank" rel="noopener" href="https://github.com/AUTOMATIC1111/stable-diffusion-webui">stable-diffusion-webui</a> 项目中存在几个能够加速的 PR，但是这些 PR 并没有合并进这个项目中，于是打算自己合并这几个 PR。</p>
<p>能起到加速作用的 PR 有以下几个：</p>
<ol>
<li><a target="_blank" rel="noopener" href="https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/15803">[Performance 1&#x2F;6] use_checkpoint &#x3D; False #15803</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/15804">[Performance 2&#x2F;6] Replace einops.rearrange with torch native ops #15804</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/15806">[Performance 4&#x2F;6] Precompute is_sdxl_inpaint flag #15806</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/15816">[Performance 5&#x2F;6] Prevent unnecessary extra networks bias backup #15816</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/15820">[Performance 6&#x2F;6] Add –precision half option to avoid casting during inference #15820</a></li>
<li><a target="_blank" rel="noopener" href="https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/15824">LDM optimization patches #15824</a></li>
</ol>
<p>我将这几个 PR 合并进项目的 dev 分支，此时的 Commit 为 ddb28b33a3561a360b429c76f28f7ff1ffe282a0。尝试将上面的 PR 按顺序合并进 dev 分支中，前 5 个的合并很顺利，但是在合并第 6 个 PR 时出现了冲突，Github 提示我需要手动解决这个冲突。</p>
<ol>
<li><p>将出现合并冲突的仓库克隆下来。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git <span class="hljs-built_in">clone</span> git@github.com:drhead/stable-diffusion-webui.git<br>正克隆到 <span class="hljs-string">&#x27;stable-diffusion-webui&#x27;</span>...<br>remote: Enumerating objects: 32742, <span class="hljs-keyword">done</span>.<br>remote: Counting objects: 100% (36/36), <span class="hljs-keyword">done</span>.<br>remote: Compressing objects: 100% (21/21), <span class="hljs-keyword">done</span>.<br>remote: Total 32742 (delta 21), reused 26 (delta 15), pack-reused 32706<br>接收对象中: 100% (32742/32742), 34.44 MiB | 4.33 MiB/s, 完成.<br>处理 delta 中: 100% (22900/22900), 完成.<br></code></pre></td></tr></table></figure>
</li>
<li><p>在仓库中把分支切换到要合并 PR 的那个 patch-4 分支。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git checkout patch-4<br>分支 <span class="hljs-string">&#x27;patch-4&#x27;</span> 设置为跟踪 <span class="hljs-string">&#x27;origin/patch-4&#x27;</span>。<br>切换到一个新分支 <span class="hljs-string">&#x27;patch-4&#x27;</span><br>$ git pull<br>已经是最新的。<br></code></pre></td></tr></table></figure>
</li>
<li><p>现在将分支切换到要合并到的 dev 分支中。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git checkout dev<br>分支 <span class="hljs-string">&#x27;dev&#x27;</span> 设置为跟踪 <span class="hljs-string">&#x27;origin/dev&#x27;</span>。<br>切换到一个新分支 <span class="hljs-string">&#x27;dev&#x27;</span><br></code></pre></td></tr></table></figure>
</li>
<li><p>将远程地址切换成自己已经合并前 5 个 PR 的项目地址上，并拉取更新。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git remote set-url origin git@github.com:licyk/stable-diffusion-webui.git<br>$ git pull --rebase<br>remote: Enumerating objects: 155, <span class="hljs-keyword">done</span>.<br>remote: Counting objects: 100% (141/141), <span class="hljs-keyword">done</span>.<br>remote: Compressing objects: 100% (57/57), <span class="hljs-keyword">done</span>.<br>remote: Total 155 (delta 98), reused 110 (delta 84), pack-reused 14<br>接收对象中: 100% (155/155), 81.73 KiB | 186.00 KiB/s, 完成.<br>处理 delta 中: 100% (100/100), 完成 13 个本地对象.<br>来自 github.com:licyk/stable-diffusion-webui<br>   0a271938..530b2ec9  dev            -&gt; origin/dev<br> * [新分支]            dev-bak        -&gt; origin/dev-bak<br>   cf2772fa..b844cd8f  master         -&gt; origin/master<br> * [新分支]            merge-all-perf -&gt; origin/merge-all-perf<br> * [新分支]            perf           -&gt; origin/perf<br> * [新分支]            tmp            -&gt; origin/tmp<br> * [新分支]            tmp-1          -&gt; origin/tmp-1<br> * [新分支]            tmp-2          -&gt; origin/tmp-2<br> * [新分支]            tmp-3          -&gt; origin/tmp-3<br>更新 0a271938..530b2ec9<br>Fast-forward<br> .eslintrc.js                                                                |   2 +<br> .github/workflows/on_pull_request.yaml                                      |  10 +-<br> .github/workflows/run_tests.yaml                                            |  10 +-<br> .gitignore                                                                  |   1 +<br> CHANGELOG.md                                                                | 301 +++++++++++++++++++++++++++++++++++-<br> README.md                                                                   |   1 +<br> _typos.toml                                                                 |   5 +<br> configs/alt-diffusion-inference.yaml                                        |   2 +-<br> configs/alt-diffusion-m18-inference.yaml                                    |   2 +-<br> configs/instruct-pix2pix.yaml                                               |   2 +-<br> configs/sd_xl_inpaint.yaml                                                  |   2 +-<br> configs/v1-inference.yaml                                                   |   2 +-<br> configs/v1-inpainting-inference.yaml                                        |   2 +-<br> extensions-builtin/LDSR/sd_hijack_ddpm_v1.py                                |   8 +-<br> extensions-builtin/Lora/lyco_helpers.py                                     |   2 +-<br> extensions-builtin/Lora/network.py                                          |  34 +++-<br> extensions-builtin/Lora/network_oft.py                                      |  58 ++++---<br> extensions-builtin/Lora/networks.py                                         |  18 ++-<br> extensions-builtin/Lora/ui_edit_user_metadata.py                            |   2 +<br> extensions-builtin/Lora/ui_extra_networks_lora.py                           |   2 +-<br> extensions-builtin/canvas-zoom-and-pan/javascript/zoom.js                   |  53 +++++--<br> extensions-builtin/canvas-zoom-and-pan/scripts/hotkey_config.py             |   4 +-<br> extensions-builtin/extra-options-section/scripts/extra_options_section.py   |   8 +-<br> .../postprocessing-for-training/scripts/postprocessing_autosized_crop.py    |   0<br> .../postprocessing-for-training/scripts&#125;/postprocessing_caption.py          |   0<br> .../scripts&#125;/postprocessing_create_flipped_copies.py                        |   0<br> .../postprocessing-for-training/scripts&#125;/postprocessing_focal_crop.py       |   0<br> .../postprocessing-for-training/scripts&#125;/postprocessing_split_oversized.py  |   2 +-<br> extensions-builtin/soft-inpainting/scripts/soft_inpainting.py               |  28 +++-<br> html/extra-networks-copy-path-button.html                                   |   2 +-<br> html/extra-networks-edit-item-button.html                                   |   2 +-<br> html/extra-networks-metadata-button.html                                    |   2 +-<br> html/extra-networks-pane-dirs.html                                          |   8 +<br> html/extra-networks-pane-tree.html                                          |   8 +<br> html/extra-networks-pane.html                                               |  64 +++++---<br> javascript/aspectRatioOverlay.js                                            |  12 +-<br> javascript/dragdrop.js                                                      |  27 +++-<br> javascript/edit-attention.js                                                |   8 +<br> javascript/extraNetworks.js                                                 | 177 ++++++++++++++-------<br> javascript/imageviewer.js                                                   |  12 +-<br> javascript/profilerVisualization.js                                         | 207 ++++++++++++++-----------<br> javascript/resizeHandle.js                                                  | 170 +++++++++++++-------<br> javascript/settings.js                                                      |   4 +-<br> javascript/ui.js                                                            |   7 +-<br> modules/api/api.py                                                          |  26 +++-<br> modules/api/models.py                                                       |   9 +-<br> modules/cache.py                                                            |  92 +++++------<br> modules/call_queue.py                                                       |   4 +-<br> modules/cmd_args.py                                                         |   8 +-<br> modules/codeformer_model.py                                                 |   2 +-<br> modules/devices.py                                                          |  26 +++-<br> modules/extensions.py                                                       |  63 +++++++-<br> modules/extra_networks.py                                                   |   2 +-<br> modules/hypernetworks/hypernetwork.py                                       |   5 +-<br> modules/images.py                                                           |  81 +++++++++-<br> modules/img2img.py                                                          |  29 ++--<br> modules/infotext_utils.py                                                   |  56 +++++--<br> modules/infotext_versions.py                                                |   4 +<br> modules/initialize.py                                                       |   5 +-<br> modules/initialize_util.py                                                  |   7 +<br> modules/launch_utils.py                                                     |   2 +-<br> modules/mac_specific.py                                                     |   2 +-<br> modules/masking.py                                                          |  42 +++--<br> modules/modelloader.py                                                      |   6 +-<br> modules/models/diffusion/ddpm_edit.py                                       |   8 +-<br> modules/options.py                                                          |   3 +<br> modules/paths_internal.py                                                   |   4 +-<br> modules/postprocessing.py                                                   |  14 +-<br> modules/processing.py                                                       | 182 ++++++++++++++--------<br> modules/processing_scripts/comments.py                                      |   7 +<br> modules/processing_scripts/sampler.py                                       |  45 ++++++<br> modules/rng.py                                                              |   4 +-<br> modules/script_callbacks.py                                                 | 248 ++++++++++++++++++++---------<br> modules/script_loading.py                                                   |   4 +<br> modules/scripts.py                                                          | 141 +++++++++++------<br> modules/scripts_postprocessing.py                                           |   6 +-<br> modules/sd_emphasis.py                                                      |   4 +-<br> modules/sd_hijack_checkpoint.py                                             |   9 +-<br> modules/sd_hijack_clip.py                                                   |  10 +-<br> modules/sd_hijack_optimizations.py                                          |  18 ++-<br> modules/sd_hijack_unet.py                                                   |  29 +++-<br> modules/sd_hijack_utils.py                                                  |  26 ++--<br> modules/sd_models.py                                                        |  85 ++++++++--<br> modules/sd_models_config.py                                                 |   2 +-<br> modules/sd_models_xl.py                                                     |  13 +-<br> modules/sd_samplers.py                                                      |  73 ++++++++-<br> modules/sd_samplers_cfg_denoiser.py                                         |   2 +-<br> modules/sd_samplers_common.py                                               |  15 +-<br> modules/sd_samplers_kdiffusion.py                                           |  88 +++++------<br> modules/sd_schedulers.py                                                    |  43 ++++++<br> modules/shared.py                                                           |  32 ++--<br> modules/shared_init.py                                                      |   8 +<br> modules/shared_items.py                                                     |  42 +++++<br> modules/shared_options.py                                                   |  21 ++-<br> modules/shared_state.py                                                     |   4 +-<br> modules/styles.py                                                           |   3 +-<br> modules/textual_inversion/autocrop.py                                       |   4 +-<br> modules/textual_inversion/dataset.py                                        |   5 +-<br> modules/textual_inversion/image_embedding.py                                |  14 +-<br> modules/textual_inversion/&#123;logging.py =&gt; saving_settings.py&#125;                |   0<br> modules/textual_inversion/textual_inversion.py                              |   4 +-<br> modules/txt2img.py                                                          |   5 +-<br> modules/ui.py                                                               |  48 ++----<br> modules/ui_common.py                                                        |  33 +---<br> modules/ui_components.py                                                    |   2 +-<br> modules/ui_extensions.py                                                    |   7 +-<br> modules/ui_extra_networks.py                                                | 163 ++++++++++++++-----<br> modules/ui_extra_networks_user_metadata.py                                  |  10 +-<br> modules/ui_loadsave.py                                                      |   2 +<br> modules/ui_postprocessing.py                                                |   2 +-<br> modules/ui_prompt_styles.py                                                 |   2 +-<br> modules/ui_settings.py                                                      |  12 +-<br> modules/ui_tempdir.py                                                       |   4 +-<br> modules/upscaler.py                                                         |   7 +-<br> modules/upscaler_utils.py                                                   |   4 +-<br> modules/util.py                                                             |  75 +++++++++<br> pyproject.toml                                                              |   6 +-<br> requirements.txt                                                            |   2 +<br> requirements_versions.txt                                                   |   2 +<br> scripts/outpainting_mk_2.py                                                 |   2 +-<br> scripts/postprocessing_codeformer.py                                        |   2 +-<br> scripts/postprocessing_gfpgan.py                                            |   2 +-<br> scripts/postprocessing_upscale.py                                           |  74 +++++++--<br> scripts/xyz_grid.py                                                         |  18 ++-<br> style.css                                                                   |  52 +++++--<br> webui.sh                                                                    |  33 ++--<br> 126 files changed, 2559 insertions(+), 972 deletions(-)<br> create mode 100644 _typos.toml<br> rename scripts/processing_autosized_crop.py =&gt; extensions-builtin/postprocessing-for-training/scripts/postprocessing_autosized_crop.py (100%)<br> rename &#123;scripts =&gt; extensions-builtin/postprocessing-for-training/scripts&#125;/postprocessing_caption.py (100%)<br> rename &#123;scripts =&gt; extensions-builtin/postprocessing-for-training/scripts&#125;/postprocessing_create_flipped_copies.py (100%)<br> rename &#123;scripts =&gt; extensions-builtin/postprocessing-for-training/scripts&#125;/postprocessing_focal_crop.py (100%)<br> rename &#123;scripts =&gt; extensions-builtin/postprocessing-for-training/scripts&#125;/postprocessing_split_oversized.py (95%)<br> create mode 100644 html/extra-networks-pane-dirs.html<br> create mode 100644 html/extra-networks-pane-tree.html<br> create mode 100644 modules/processing_scripts/sampler.py<br> create mode 100644 modules/sd_schedulers.py<br> rename modules/textual_inversion/&#123;logging.py =&gt; saving_settings.py&#125; (100%)<br></code></pre></td></tr></table></figure>
</li>
<li><p>尝试将出现冲突的 patch-4 分支合并到 dev 分支中。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git merge --no-ff patch-4<br>自动合并 modules/sd_hijack_unet.py<br>冲突（内容）：合并冲突于 modules/sd_hijack_unet.py<br>自动合并失败，修正冲突然后提交修正的结果。<br></code></pre></td></tr></table></figure>
</li>
<li><p>此时这里提示合并冲突，需要修改冲突的部分。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ lvim modules/sd_hijack_unet.py<br></code></pre></td></tr></table></figure></li>
</ol>
<p>这是冲突的代码部分。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python">ddpm_edit_hijack = <span class="hljs-literal">None</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hijack_ddpm_edit</span>():<br>    <span class="hljs-keyword">global</span> ddpm_edit_hijack<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ddpm_edit_hijack:<br>        CondFunc(<span class="hljs-string">&#x27;modules.models.diffusion.ddpm_edit.LatentDiffusion.decode_first_stage&#x27;</span>, first_stage_sub, first_stage_cond)<br>        CondFunc(<span class="hljs-string">&#x27;modules.models.diffusion.ddpm_edit.LatentDiffusion.encode_first_stage&#x27;</span>, first_stage_sub, first_stage_cond)<br>        ddpm_edit_hijack = CondFunc(<span class="hljs-string">&#x27;modules.models.diffusion.ddpm_edit.LatentDiffusion.apply_model&#x27;</span>, apply_model)<br><br><br>unet_needs_upcast = <span class="hljs-keyword">lambda</span> *args, **kwargs: devices.unet_needs_upcast<br>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD<br><br>=======<br>CondFunc(<span class="hljs-string">&#x27;ldm.models.diffusion.ddpm.LatentDiffusion.apply_model&#x27;</span>, apply_model, unet_needs_upcast)<br>CondFunc(<span class="hljs-string">&#x27;ldm.modules.diffusionmodules.openaimodel.timestep_embedding&#x27;</span>, timestep_embedding, <span class="hljs-keyword">lambda</span> *args, **kwargs: <span class="hljs-literal">True</span>)<br>CondFunc(<span class="hljs-string">&#x27;ldm.modules.attention.SpatialTransformer.forward&#x27;</span>, spatial_transformer_forward, <span class="hljs-keyword">lambda</span> *args, **kwargs: <span class="hljs-literal">True</span>)<br>CondFunc(<span class="hljs-string">&#x27;ldm.modules.diffusionmodules.openaimodel.timestep_embedding&#x27;</span>, <span class="hljs-keyword">lambda</span> orig_func, timesteps, *args, **kwargs: orig_func(timesteps, *args, **kwargs).to(torch.float32 <span class="hljs-keyword">if</span> timesteps.dtype == torch.int64 <span class="hljs-keyword">else</span> devices.dtype_unet), unet_needs_upcast)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; patch-<span class="hljs-number">4</span><br><span class="hljs-keyword">if</span> version.parse(torch.__version__) &lt;= version.parse(<span class="hljs-string">&quot;1.13.2&quot;</span>) <span class="hljs-keyword">or</span> torch.cuda.is_available():<br>    CondFunc(<span class="hljs-string">&#x27;ldm.modules.diffusionmodules.util.GroupNorm32.forward&#x27;</span>, <span class="hljs-keyword">lambda</span> orig_func, self, *args, **kwargs: orig_func(self.<span class="hljs-built_in">float</span>(), *args, **kwargs), unet_needs_upcast)<br>    CondFunc(<span class="hljs-string">&#x27;ldm.modules.attention.GEGLU.forward&#x27;</span>, <span class="hljs-keyword">lambda</span> orig_func, self, x: orig_func(self.<span class="hljs-built_in">float</span>(), x.<span class="hljs-built_in">float</span>()).to(devices.dtype_unet), unet_needs_upcast)<br>    CondFunc(<span class="hljs-string">&#x27;open_clip.transformer.ResidualAttentionBlock.__init__&#x27;</span>, <span class="hljs-keyword">lambda</span> orig_func, *args, **kwargs: kwargs.update(&#123;<span class="hljs-string">&#x27;act_layer&#x27;</span>: GELUHijack&#125;) <span class="hljs-keyword">and</span> <span class="hljs-literal">False</span> <span class="hljs-keyword">or</span> orig_func(*args, **kwargs), <span class="hljs-keyword">lambda</span> _, *args, **kwargs: kwargs.get(<span class="hljs-string">&#x27;act_layer&#x27;</span>) <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> kwargs[<span class="hljs-string">&#x27;act_layer&#x27;</span>] == torch.nn.GELU)<br><br>first_stage_cond = <span class="hljs-keyword">lambda</span> _, self, *args, **kwargs: devices.unet_needs_upcast <span class="hljs-keyword">and</span> self.model.diffusion_model.dtype == torch.float16<br>first_stage_sub = <span class="hljs-keyword">lambda</span> orig_func, self, x, **kwargs: orig_func(self, x.to(devices.dtype_vae), **kwargs)<br>CondFunc(<span class="hljs-string">&#x27;ldm.models.diffusion.ddpm.LatentDiffusion.decode_first_stage&#x27;</span>, first_stage_sub, first_stage_cond)<br>CondFunc(<span class="hljs-string">&#x27;ldm.models.diffusion.ddpm.LatentDiffusion.encode_first_stage&#x27;</span>, first_stage_sub, first_stage_cond)<br>CondFunc(<span class="hljs-string">&#x27;ldm.models.diffusion.ddpm.LatentDiffusion.get_first_stage_encoding&#x27;</span>, <span class="hljs-keyword">lambda</span> orig_func, *args, **kwargs: orig_func(*args, **kwargs).<span class="hljs-built_in">float</span>(), first_stage_cond)<br><br>CondFunc(<span class="hljs-string">&#x27;ldm.models.diffusion.ddpm.LatentDiffusion.apply_model&#x27;</span>, apply_model)<br>CondFunc(<span class="hljs-string">&#x27;sgm.modules.diffusionmodules.wrappers.OpenAIWrapper.forward&#x27;</span>, apply_model)<br></code></pre></td></tr></table></figure>

<p>在起冲突的地方，Git 使用一些标识将两个冲突的部分划分了出来。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD        <span class="hljs-comment"># 这是原有 dev 分支的部分</span><br><br>=======             <span class="hljs-comment"># 这是两个不同代码部分的分隔标记</span><br>CondFunc(<span class="hljs-string">&#x27;ldm.models.diffusion.ddpm.LatentDiffusion.apply_model&#x27;</span>, apply_model, unet_needs_upcast)<br>CondFunc(<span class="hljs-string">&#x27;ldm.modules.diffusionmodules.openaimodel.timestep_embedding&#x27;</span>, timestep_embedding, <span class="hljs-keyword">lambda</span> *args, **kwargs: <span class="hljs-literal">True</span>)<br>CondFunc(<span class="hljs-string">&#x27;ldm.modules.attention.SpatialTransformer.forward&#x27;</span>, spatial_transformer_forward, <span class="hljs-keyword">lambda</span> *args, **kwargs: <span class="hljs-literal">True</span>)<br>CondFunc(<span class="hljs-string">&#x27;ldm.modules.diffusionmodules.openaimodel.timestep_embedding&#x27;</span>, <span class="hljs-keyword">lambda</span> orig_func, timesteps, *args, **kwargs: orig_func(timesteps, *args, **kwargs).to(torch.float32 <span class="hljs-keyword">if</span> timesteps.dtype == torch.int64 <span class="hljs-keyword">else</span> devices.dtype_unet), unet_needs_upcast)<br>&gt;&gt;&gt;&gt;&gt;&gt;&gt; patch-<span class="hljs-number">4</span>     <span class="hljs-comment"># 这是合并进来的 patch-4 分支的部分</span><br></code></pre></td></tr></table></figure>

<p>解决冲突的时需要将上面注释的部分删除，修改后的结果如下。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs python">ddpm_edit_hijack = <span class="hljs-literal">None</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">hijack_ddpm_edit</span>():<br>    <span class="hljs-keyword">global</span> ddpm_edit_hijack<br>    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> ddpm_edit_hijack:<br>        CondFunc(<span class="hljs-string">&#x27;modules.models.diffusion.ddpm_edit.LatentDiffusion.decode_first_stage&#x27;</span>, first_stage_sub, first_stage_cond)<br>        CondFunc(<span class="hljs-string">&#x27;modules.models.diffusion.ddpm_edit.LatentDiffusion.encode_first_stage&#x27;</span>, first_stage_sub, first_stage_cond)<br>        ddpm_edit_hijack = CondFunc(<span class="hljs-string">&#x27;modules.models.diffusion.ddpm_edit.LatentDiffusion.apply_model&#x27;</span>, apply_model)<br><br><br>unet_needs_upcast = <span class="hljs-keyword">lambda</span> *args, **kwargs: devices.unet_needs_upcast<br><br>CondFunc(<span class="hljs-string">&#x27;ldm.models.diffusion.ddpm.LatentDiffusion.apply_model&#x27;</span>, apply_model, unet_needs_upcast)<br>CondFunc(<span class="hljs-string">&#x27;ldm.modules.diffusionmodules.openaimodel.timestep_embedding&#x27;</span>, timestep_embedding, <span class="hljs-keyword">lambda</span> *args, **kwargs: <span class="hljs-literal">True</span>)<br>CondFunc(<span class="hljs-string">&#x27;ldm.modules.attention.SpatialTransformer.forward&#x27;</span>, spatial_transformer_forward, <span class="hljs-keyword">lambda</span> *args, **kwargs: <span class="hljs-literal">True</span>)<br>CondFunc(<span class="hljs-string">&#x27;ldm.modules.diffusionmodules.openaimodel.timestep_embedding&#x27;</span>, <span class="hljs-keyword">lambda</span> orig_func, timesteps, *args, **kwargs: orig_func(timesteps, *args, **kwargs).to(torch.float32 <span class="hljs-keyword">if</span> timesteps.dtype == torch.int64 <span class="hljs-keyword">else</span> devices.dtype_unet), unet_needs_upcast)<br><br><span class="hljs-keyword">if</span> version.parse(torch.__version__) &lt;= version.parse(<span class="hljs-string">&quot;1.13.2&quot;</span>) <span class="hljs-keyword">or</span> torch.cuda.is_available():<br>    CondFunc(<span class="hljs-string">&#x27;ldm.modules.diffusionmodules.util.GroupNorm32.forward&#x27;</span>, <span class="hljs-keyword">lambda</span> orig_func, self, *args, **kwargs: orig_func(self.<span class="hljs-built_in">float</span>(), *args, **kwargs), unet_needs_upcast)<br>    CondFunc(<span class="hljs-string">&#x27;ldm.modules.attention.GEGLU.forward&#x27;</span>, <span class="hljs-keyword">lambda</span> orig_func, self, x: orig_func(self.<span class="hljs-built_in">float</span>(), x.<span class="hljs-built_in">float</span>()).to(devices.dtype_unet), unet_needs_upcast)<br>    CondFunc(<span class="hljs-string">&#x27;open_clip.transformer.ResidualAttentionBlock.__init__&#x27;</span>, <span class="hljs-keyword">lambda</span> orig_func, *args, **kwargs: kwargs.update(&#123;<span class="hljs-string">&#x27;act_layer&#x27;</span>: GELUHijack&#125;) <span class="hljs-keyword">and</span> <span class="hljs-literal">False</span> <span class="hljs-keyword">or</span> orig_func(*args, **kwargs), <span class="hljs-keyword">lambda</span> _, *args, **kwargs: kwargs.get(<span class="hljs-string">&#x27;act_layer&#x27;</span>) <span class="hljs-keyword">is</span> <span class="hljs-literal">None</span> <span class="hljs-keyword">or</span> kwargs[<span class="hljs-string">&#x27;act_layer&#x27;</span>] == torch.nn.GELU)<br><br>first_stage_cond = <span class="hljs-keyword">lambda</span> _, self, *args, **kwargs: devices.unet_needs_upcast <span class="hljs-keyword">and</span> self.model.diffusion_model.dtype == torch.float16<br>first_stage_sub = <span class="hljs-keyword">lambda</span> orig_func, self, x, **kwargs: orig_func(self, x.to(devices.dtype_vae), **kwargs)<br>CondFunc(<span class="hljs-string">&#x27;ldm.models.diffusion.ddpm.LatentDiffusion.decode_first_stage&#x27;</span>, first_stage_sub, first_stage_cond)<br>CondFunc(<span class="hljs-string">&#x27;ldm.models.diffusion.ddpm.LatentDiffusion.encode_first_stage&#x27;</span>, first_stage_sub, first_stage_cond)<br>CondFunc(<span class="hljs-string">&#x27;ldm.models.diffusion.ddpm.LatentDiffusion.get_first_stage_encoding&#x27;</span>, <span class="hljs-keyword">lambda</span> orig_func, *args, **kwargs: orig_func(*args, **kwargs).<span class="hljs-built_in">float</span>(), first_stage_cond)<br><br>CondFunc(<span class="hljs-string">&#x27;ldm.models.diffusion.ddpm.LatentDiffusion.apply_model&#x27;</span>, apply_model)<br>CondFunc(<span class="hljs-string">&#x27;sgm.modules.diffusionmodules.wrappers.OpenAIWrapper.forward&#x27;</span>, apply_model)<br></code></pre></td></tr></table></figure>

<ol start="7">
<li>保存这个文件后，将这个文件添加到 Git 的暂存区，并提交更改。<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git add modules/sd_hijack_unet.py<br>$ git commit<br></code></pre></td></tr></table></figure></li>
</ol>
<p>这里打开了提交信息编辑器，让我编辑提交信息。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs shell">Merge branch &#x27;patch-4&#x27; into dev<br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">Conflicts:</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	modules/sd_hijack_unet.py</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"></span><br><span class="language-bash"><span class="hljs-comment"># 似乎您正在做一个合并提交。如果不对，请运行</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	git update-ref -d MERGE_HEAD</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">然后重试。</span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">请为您的变更输入提交说明。以 <span class="hljs-string">&#x27;#&#x27;</span> 开始的行将被忽略，而一个空的提交</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">说明将会终止提交。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"></span><br><span class="language-bash"><span class="hljs-comment"># 位于分支 dev</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">您的分支与上游分支 <span class="hljs-string">&#x27;origin/dev&#x27;</span> 一致。</span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"></span><br><span class="language-bash"><span class="hljs-comment"># 所有冲突已解决但您仍处于合并中。</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash"></span><br><span class="language-bash"><span class="hljs-comment"># 要提交的变更：</span></span><br><span class="hljs-meta prompt_">#</span><span class="language-bash">	修改：     modules/sd_hijack_unet.py</span><br><span class="hljs-meta prompt_">#</span><br></code></pre></td></tr></table></figure>

<p>这个提交信息不需要修改，直接保存，保存后会显示最终的提交信息。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs bash">[dev 73d652d0] Merge branch <span class="hljs-string">&#x27;patch-4&#x27;</span> into dev<br></code></pre></td></tr></table></figure>

<ol start="8">
<li>这时冲突已经完全解决，将这个分支提交到远程仓库中。<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git push origin dev<br>枚举对象中: 10, 完成.<br>对象计数中: 100% (10/10), 完成.<br>使用 16 个线程进行压缩<br>压缩对象中: 100% (4/4), 完成.<br>写入对象中: 100% (4/4), 663 字节 | 331.00 KiB/s, 完成.<br>总共 4（差异 3），复用 0（差异 0），包复用 0（来自  0 个包）<br>remote: Resolving deltas: 100% (3/3), completed with 3 <span class="hljs-built_in">local</span> objects.<br>To github.com:licyk/stable-diffusion-webui.git<br>   530b2ec9..73d652d0  dev -&gt; dev<br></code></pre></td></tr></table></figure></li>
</ol>
<hr>
<p>2024.5.29</p>
<p>原项目更新后，我需要将这些更新同步到自己的分支上，所以我需要将原项目的分支添加到自己的仓库上</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git remote add a1111 https://github.com/AUTOMATIC1111/stable-diffusion-webui  <span class="hljs-comment"># 添加原项目的仓库地址</span><br>$ git branch a1111-master                                                       <span class="hljs-comment"># 新建一个分支用于连接原项目的仓库</span><br>$ git checkout a1111-master                                                     <span class="hljs-comment"># 切换到这个新分支</span><br>$ git fetch a1111                                                               <span class="hljs-comment"># 从原项目的远程仓库中拉取更新到这个仓库</span><br>remote: Enumerating objects: 20, <span class="hljs-keyword">done</span>.<br>remote: Counting objects: 100% (20/20), <span class="hljs-keyword">done</span>.<br>remote: Compressing objects: 100% (18/18), <span class="hljs-keyword">done</span>.<br>remote: Total 20 (delta 8), reused 10 (delta 2), pack-reused 0<br>展开对象中: 100% (20/20), 38.86 KiB | 1020.00 KiB/s, 完成.<br>来自 https://github.com/AUTOMATIC1111/stable-diffusion-webui<br> * [新分支]            Inpaint-Only-masked-blank-mask               -&gt; a1111/Inpaint-Only-masked-blank-mask<br> * [新分支]            ReloadUI-backgroundColor---background-fill-primary -&gt; a1111/ReloadUI-backgroundColor---background-fill-primary<br> * [新分支]            api-old-sampler-names                        -&gt; a1111/api-old-sampler-names<br> * [新分支]            bump-Pillow-blendmodes-dependency            -&gt; a1111/bump-Pillow-blendmodes-dependency<br> * [新分支]            compact-Soft-Inpainting-infotext             -&gt; a1111/compact-Soft-Inpainting-infotext<br> * [新分支]            consistency-dec                              -&gt; a1111/consistency-dec<br> * [新分支]            create_infotext-index-and-callable           -&gt; a1111/create_infotext-index-and-callable<br> * [新分支]            dev                                          -&gt; a1111/dev<br> * [新分支]            drag-text-fix                                -&gt; a1111/drag-text-fix<br> * [新分支]            fix-Hypertile-xyz                            -&gt; a1111/fix-Hypertile-xyz<br> * [新分支]            fix-change-log                               -&gt; a1111/fix-change-log<br> * [新分支]            fix-corrupt-model-loop                       -&gt; a1111/fix-corrupt-model-loop<br> * [新分支]            fix-default-in-get_learned_conditioning      -&gt; a1111/fix-default-in-get_learned_conditioning<br> * [新分支]            fix-extention-update-when-not-on-main-branch -&gt; a1111/fix-extention-update-when-not-on-main-branch<br> * [新分支]            fix-extra-batch-mode-P-Transparency          -&gt; a1111/fix-extra-batch-mode-P-Transparency<br> * [新分支]            fix-fonts-with-subpath-                      -&gt; a1111/fix-fonts-with-subpath-<br> * [新分支]            fix_p_invalid_sampler_and_scheduler          -&gt; a1111/fix_p_invalid_sampler_and_scheduler<br> * [新分支]            gradio-4.x-test                              -&gt; a1111/gradio-4.x-test<br> * [新分支]            gradio4                                      -&gt; a1111/gradio4<br> * [新分支]            initial-model-download-integrity             -&gt; a1111/initial-model-download-integrity<br> * [新分支]            lora-bundled-TI-infotext                     -&gt; a1111/lora-bundled-TI-infotext<br> * [新分支]            lora_emb_bundle                              -&gt; a1111/lora_emb_bundle<br> * [新分支]            master                                       -&gt; a1111/master<br> * [新分支]            more-extra-transparency-fix-again            -&gt; a1111/more-extra-transparency-fix-again<br> * [新分支]            no-referrer                                  -&gt; a1111/no-referrer<br> * [新分支]            patch__pkg_resources__packaging              -&gt; a1111/patch__pkg_resources__packaging<br> * [新分支]            refiner_alt                                  -&gt; a1111/refiner_alt<br> * [新分支]            release_candidate                            -&gt; a1111/release_candidate<br> * [新分支]            revert-use-of-gitpython-hijack               -&gt; a1111/revert-use-of-gitpython-hijack<br> * [新分支]            sqlite-cache                                 -&gt; a1111/sqlite-cache<br> * [新分支]            torch-float64-or-float32                     -&gt; a1111/torch-float64-or-float32<br> * [新分支]            use-script_path-for-webui-root-in-launch_utils -&gt; a1111/use-script_path-for-webui-root-in-launch_utils<br> * [新分支]            xyz-csv-skipinitialspace                     -&gt; a1111/xyz-csv-skipinitialspace<br> * [新分支]            xyz-override-rework                          -&gt; a1111/xyz-override-rework<br> * [新标签]            v1.9.4                                       -&gt; v1.9.4<br>$ git branch -u a1111/master                                                    <span class="hljs-comment"># 将这个分支本地分支和原项目仓库的 master 分支连接上</span><br>分支 <span class="hljs-string">&#x27;a1111-master&#x27;</span> 设置为跟踪 <span class="hljs-string">&#x27;a1111/master&#x27;</span>。<br></code></pre></td></tr></table></figure>

<p>这样就在本地的仓库中添加了原项目的地址，并创建了一个新分支来连接这个地址。</p>
<p>现在回到自己的的分支上并合并原仓库的更新。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git checkout master       <span class="hljs-comment"># 切换分支</span><br>切换到分支 <span class="hljs-string">&#x27;master&#x27;</span><br>您的分支与上游分支 <span class="hljs-string">&#x27;origin/master&#x27;</span> 一致。<br>$ git merge a1111/master    <span class="hljs-comment"># 从原项目的 master 分支合并更新</span><br>Merge made by the <span class="hljs-string">&#x27;ort&#x27;</span> strategy.<br> CHANGELOG.md              | 5 +++++<br> requirements_versions.txt | 1 +<br> 2 files changed, 6 insertions(+)<br>$ git push                  <span class="hljs-comment"># 将合并厚的结果推送到自己的远程仓库</span><br></code></pre></td></tr></table></figure>

<p>另外发现一个更加合适的合并分支的方式，这里先把自己的仓库的提交信息回退到之前要解决冲突的提交信息上，用作演示。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git reset --hard 530b2ec9435806bf34ed462a003d611b9d32c38b<br>HEAD 现在位于 530b2ec9 Merge pull request <span class="hljs-comment">#5 from huchenlei/force_half</span><br></code></pre></td></tr></table></figure>

<p>将那个要合并那个加速补丁的仓库的地址添加到本地仓库，并拉取内容到本地仓库中。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git remote add drhead https://github.com/drhead/stable-diffusion-webui<br>$ git pull drhead<br>来自 https://github.com/drhead/stable-diffusion-webui<br> * [新分支]            add-Block-component-creation-callback      -&gt; drhead/add-Block-component-creation-callback<br> * [新分支]            bump-Pillow-blendmodes-dependency          -&gt; drhead/bump-Pillow-blendmodes-dependency<br> * [新分支]            consistency-dec                            -&gt; drhead/consistency-dec<br> * [新分支]            dev                                        -&gt; drhead/dev<br> * [新分支]            fix-Auto-focal-point-crop-for-opencv-4.8.x -&gt; drhead/fix-Auto-focal-point-crop-for-opencv-4.8.x<br> * [新分支]            lora_emb_bundle                            -&gt; drhead/lora_emb_bundle<br> * [新分支]            master                                     -&gt; drhead/master<br> * [新分支]            patch-1                                    -&gt; drhead/patch-1<br> * [新分支]            patch-2                                    -&gt; drhead/patch-2<br> * [新分支]            patch-3                                    -&gt; drhead/patch-3<br> * [新分支]            patch-4                                    -&gt; drhead/patch-4<br> * [新分支]            patch-5                                    -&gt; drhead/patch-5<br> * [新分支]            protect-against-bad-ui-creation-scripts    -&gt; drhead/protect-against-bad-ui-creation-scripts<br> * [新分支]            refiner_alt                                -&gt; drhead/refiner_alt<br> * [新分支]            refiner_cumprod_fix                        -&gt; drhead/refiner_cumprod_fix<br> * [新分支]            refiner_fix                                -&gt; drhead/refiner_fix<br> * [新分支]            release_candidate                          -&gt; drhead/release_candidate<br> * [新分支]            revert-use-of-gitpython-hijack             -&gt; drhead/revert-use-of-gitpython-hijack<br> * [新分支]            sqlite-cache                               -&gt; drhead/sqlite-cache<br> * [新分支]            test-fp8                                   -&gt; drhead/test-fp8<br> * [新分支]            torch210                                   -&gt; drhead/torch210<br> * [新分支]            zero-terminal-snr                          -&gt; drhead/zero-terminal-snr<br>您要求从远程 <span class="hljs-string">&#x27;drhead&#x27;</span> 拉取，但是未指定一个分支。因为这不是当前<br>分支默认的远程仓库，您必须在命令行中指定一个分支名。<br></code></pre></td></tr></table></figure>

<p>虽然 Git 提示未指定一个分支，但是那个仓库的内容已经拉取下来了，这时候可以合并那个仓库中的加速补丁的分支。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git merge drhead/patch-4<br>自动合并 modules/sd_hijack_unet.py<br>冲突（内容）：合并冲突于 modules/sd_hijack_unet.py<br>自动合并失败，修正冲突然后提交修正的结果。<br></code></pre></td></tr></table></figure>

<p>和之前的解决冲突时的提示一样，按照之前的方法解决冲突就行。相比之前去解决冲突的方法，这个方法更加便捷，可以省去一些步骤。</p>
<hr>
<p>2024.6.23</p>
<p>这次试着把 <a target="_blank" rel="noopener" href="https://github.com/AUTOMATIC1111/stable-diffusion-webui/pull/14855">[WIP] Asynchronous model mover for lowvram by wfjsw · Pull Request #14855 · AUTOMATIC1111&#x2F;stable-diffusion-webui</a> 这个 PR 合并。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><code class="hljs bash">$ git remote add wfjsw https://github.com/wfjsw/stable-diffusion-webui <span class="hljs-comment"># 添加要合并分支的远程源</span><br>$ git fetch wfjsw <span class="hljs-comment"># 拉取这个远程源的内容</span><br>remote: Enumerating objects: 115, <span class="hljs-keyword">done</span>.<br>remote: Counting objects: 100% (66/66), <span class="hljs-keyword">done</span>.<br>remote: Total 115 (delta 66), reused 66 (delta 66), pack-reused 49<br>接收对象中: 100% (115/115), 64.49 KiB | 217.00 KiB/s, 完成.<br>处理 delta 中: 100% (83/83), 完成 34 个本地对象.<br>来自 https://github.com/wfjsw/stable-diffusion-webui<br> * [新分支]            Zoom-Alt-instead-of-Shift      -&gt; wfjsw/Zoom-Alt-instead-of-Shift<br> * [新分支]            api-quit-restart               -&gt; wfjsw/api-quit-restart<br> * [新分支]            cfg-rescale                    -&gt; wfjsw/cfg-rescale<br> * [新分支]            context-menus-dynamic          -&gt; wfjsw/context-menus-dynamic<br> * [新分支]            dag                            -&gt; wfjsw/dag<br> * [新分支]            dev                            -&gt; wfjsw/dev<br> * [新分支]            ext-index-env                  -&gt; wfjsw/ext-index-env<br> * [新分支]            ext-inst-pbar                  -&gt; wfjsw/ext-inst-pbar<br> * [新分支]            extension-index-exception      -&gt; wfjsw/extension-index-exception<br> * [新分支]            fix-calc_resolution_hires      -&gt; wfjsw/fix-calc_resolution_hires<br> * [新分支]            fix-env-get                    -&gt; wfjsw/fix-env-get<br> * [新分支]            fix-env-get-1                  -&gt; wfjsw/fix-env-get-1<br> * [新分支]            git-clone-autofix              -&gt; wfjsw/git-clone-autofix<br> * [新分支]            git-clone-progress             -&gt; wfjsw/git-clone-progress<br> * [新分支]            master                         -&gt; wfjsw/master<br> * [新分支]            model-mover                    -&gt; wfjsw/model-mover<br> * [新分支]            move-from-sysinfo-to-errors    -&gt; wfjsw/move-from-sysinfo-to-errors<br> * [新分支]            move-start-timer               -&gt; wfjsw/move-start-timer<br> * [新分支]            patch-1                        -&gt; wfjsw/patch-1<br> * [新分支]            prepend-pythonpath             -&gt; wfjsw/prepend-pythonpath<br> * [新分支]            release_candidate              -&gt; wfjsw/release_candidate<br> * [新分支]            revert-11244                   -&gt; wfjsw/revert-11244<br> * [新分支]            revert-use-of-gitpython-hijack -&gt; wfjsw/revert-use-of-gitpython-hijack<br> * [新分支]            running-without-autocast       -&gt; wfjsw/running-without-autocast<br> * [新分支]            state-dict-ref-comparison      -&gt; wfjsw/state-dict-ref-comparison<br> * [新分支]            typo-fix-1                     -&gt; wfjsw/typo-fix-1<br> * [新分支]            use-ext-name-for-installed     -&gt; wfjsw/use-ext-name-for-installed<br> * [新分支]            v1.2.0-hotfix                  -&gt; wfjsw/v1.2.0-hotfix<br>$ git fetch a1111 <span class="hljs-comment"># 拉取官方的更新内容</span><br>remote: Enumerating objects: 215, <span class="hljs-keyword">done</span>.<br>remote: Counting objects: 100% (206/206), <span class="hljs-keyword">done</span>.<br>remote: Compressing objects: 100% (112/112), <span class="hljs-keyword">done</span>.<br>remote: Total 215 (delta 123), reused 161 (delta 94), pack-reused 9<br>接收对象中: 100% (215/215), 171.97 KiB | 1.05 MiB/s, 完成.<br>处理 delta 中: 100% (123/123), 完成 11 个本地对象.<br>来自 https://github.com/AUTOMATIC1111/stable-diffusion-webui<br> * [新分支]            ToggleLivePriview-in-image-viewer            -&gt; a1111/ToggleLivePriview-in-image-viewer<br>   547778b1..a30b19dd  dev                                          -&gt; a1111/dev<br> * [新分支]            fix-Sampler-Scheduler-autocorrection-warning -&gt; a1111/fix-Sampler-Scheduler-autocorrection-warning<br> * [新分支]            fix-infotext-Lora-hashes-fro-hires-fix-different-lora -&gt; a1111/fix-infotext-Lora-hashes-fro-hires-fix-different-lora<br> * [新分支]            remove-dont_fix_second_order_samplers_schedule -&gt; a1111/remove-dont_fix_second_order_samplers_schedule<br> * [新分支]            sd3                                          -&gt; a1111/sd3<br>$ git merge a1111/dev <span class="hljs-comment"># 合并一下更新</span><br>更新 547778b1..a30b19dd<br>Fast-forward<br> .gitignore                          |  1 +<br> javascript/progressbar.js           | 22 ++++++++++++++++++++++<br> javascript/ui.js                    |  1 +<br> modules/call_queue.py               | 10 ++++++++--<br> modules/images.py                   | 15 ++++++++++-----<br> modules/processing.py               | 38 ++++++++++++++++++++++++++++++++++----<br> modules/profiling.py                | 46 ++++++++++++++++++++++++++++++++++++++++++++++<br> modules/scripts.py                  | 15 +++++++++++++++<br> modules/sd_hijack_clip.py           |  4 +++-<br> modules/sd_models.py                | 20 +++++++++++++-------<br> modules/sd_samplers_cfg_denoiser.py |  4 +---<br> modules/sd_samplers_kdiffusion.py   |  4 ++--<br> modules/sd_schedulers.py            | 18 +++++++++++++-----<br> modules/shared_options.py           | 18 ++++++++++++++++++<br> script.js                           | 15 +++++++++++++++<br> scripts/xyz_grid.py                 |  8 +++++---<br> style.css                           |  6 +++++-<br> 17 files changed, 212 insertions(+), 33 deletions(-)<br> create mode 100644 modules/profiling.py<br>$ git branch lowvram <span class="hljs-comment"># 建一个新分支来合并新的内容</span><br>$ git checkout lowvram<br>切换到分支 <span class="hljs-string">&#x27;lowvram&#x27;</span><br>$ git merge wfjsw/model-mover<br>自动合并 modules/devices.py<br>冲突（内容）：合并冲突于 modules/devices.py<br>自动合并 modules/processing.py<br>冲突（内容）：合并冲突于 modules/processing.py<br>自动合并 modules/sd_models.py<br>自动合并 modules/shared_options.py<br>自动合并失败，修正冲突然后提交修正的结果。<br>$ lvim modules/devices.py <span class="hljs-comment"># 和以前的方法一样解决冲突</span><br>$ lvim modules/processing.py<br>$ git add . <span class="hljs-comment"># 再把解决冲突后的内容添加进去</span><br>$ git commit<br>[lowvram 202f6d3a] Merge remote-tracking branch <span class="hljs-string">&#x27;wfjsw/model-mover&#x27;</span> into lowvram<br>$ git push --set-upstream origin lowvram<br></code></pre></td></tr></table></figure>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E7%BB%8F%E9%AA%8C/" class="category-chain-item">经验</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/linux/" class="print-no-link">#linux</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>解决 Git 合并冲突</div>
      <div>http://licyk.github.io/2024/05/21/resolve-git-conflict/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>licyk</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年5月21日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/06/14/upload-single-file-to-modelscope/" title="将单个文件上传到 ModelScope">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">将单个文件上传到 ModelScope</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/04/11/sd-tag-collection/" title="Stable Diffusion 提示词收集">
                        <span class="hidden-mobile">Stable Diffusion 提示词收集</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
    <div id="giscus" class="giscus"></div>
    <script type="text/javascript">
      Fluid.utils.loadComments('#giscus', function() {
        var options = {"repo":"licyk/licyk.github.io","repo-id":"MDEwOlJlcG9zaXRvcnkzMjYzMzY5ODM=","category":"Comment","category-id":"DIC_kwDOE3OB184CcA16","theme-light":"light","theme-dark":"dark","mapping":"pathname","reactions-enabled":1,"emit-metadata":0,"input-position":"top","lang":"zh-CN","data-strict":1};
        var attributes = {};
        for (let option in options) {
          if (!option.startsWith('theme-')) {
            var key = option.startsWith('data-') ? option : 'data-' + option;
            attributes[key] = options[option];
          }
        }
        var light = 'light';
        var dark = 'dark';
        window.GiscusThemeLight = light;
        window.GiscusThemeDark = dark;
        attributes['data-theme'] = document.documentElement.getAttribute('data-user-color-scheme') === 'dark' ? dark : light;
        for (let attribute in attributes) {
          var value = attributes[attribute];
          if (value === undefined || value === null || value === '') {
            delete attributes[attribute];
          }
        }
        var s = document.createElement('script');
        s.setAttribute('src', 'https://giscus.app/client.js');
        s.setAttribute('crossorigin', 'anonymous');
        for (let attribute in attributes) {
          s.setAttribute(attribute, attributes[attribute]);
        }
        var ss = document.getElementsByTagName('script');
        var e = ss.length > 0 ? ss[ss.length - 1] : document.head || document.documentElement;
        e.parentNode.insertBefore(s, e.nextSibling);
      });
    </script>
    <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        总访问量 
        <span id="leancloud-site-pv"></span>
         次
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        总访客数 
        <span id="leancloud-site-uv"></span>
         人
      </span>
    
    

  

</div>

  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>




  
<script src="/js/sakura.js"></script>



<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
